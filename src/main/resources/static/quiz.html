<!DOCTYPE html>
<html lang="az">
<head>
  <meta charset="UTF-8">
  <title>Quiz App</title>
  <style>
    body { font-family: Arial, sans-serif; background: #f9f9f9; padding: 20px; }
    .quiz-container { max-width: 800px; margin: auto; background: white; padding: 30px; border-radius: 8px; box-shadow: 0 0 10px rgba(0,0,0,0.1); }
    .question { margin-bottom: 25px; }
    .question h3 { margin-bottom: 10px; }
    .options label { display: block; margin-bottom: 8px; cursor: pointer; }
    button { padding: 10px 20px; background: #007bff; color: white; border: none; border-radius: 4px; cursor: pointer; }
    button:hover { background: #0056b3; }
    .result { margin-top: 20px; font-weight: bold; }
  </style>
</head>
<body>

<div class="quiz-container">
  <h1>Fövqəladə Hallar üzrə Quiz</h1>
  <div id="quiz"></div>
  <button onclick="submitQuiz()">Cavabları Yoxla</button>
  <div id="result" class="result"></div>
</div>

<script>
  let quizData = JSON.parse(localStorage.getItem("quizQuestions") || "[]");
  const userAnswers = new Map();

  function renderQuiz() {
    const quizDiv = document.getElementById("quiz");
    quizDiv.innerHTML = '';
    quizData.forEach((q, idx) => {
      const qDiv = document.createElement("div");
      qDiv.classList.add("question");
      qDiv.innerHTML = `<h3>${idx + 1}. ${q.questionText}</h3>`;
      q.options.forEach(opt => {
        const option = document.createElement("label");
        option.innerHTML = `
          <input type="radio" name="q${q.id}" value="${opt.id}" onchange="userAnswers.set(${q.id}, ${opt.id})">
          ${opt.optionText}
        `;
        qDiv.appendChild(option);
      });
      quizDiv.appendChild(qDiv);
    });
  }

  function submitQuiz() {
    let correct = 0;
    quizData.forEach(q => {
      const selectedId = userAnswers.get(q.id);
      const correctOption = q.options.find(o => o.isCorrect);
      if (correctOption && selectedId === correctOption.id) {
        correct++;
      }
    });
    document.getElementById("result").textContent = `Sizin nəticəniz: ${correct} / ${quizData.length}`;
  }

  document.addEventListener("DOMContentLoaded", renderQuiz);
</script>

</body>
</html>
